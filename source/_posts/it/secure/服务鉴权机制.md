---
title: 服务鉴权机制
date: 2018-11-21 17:31:26
tags: [IT,Secure]
---

## Token 验证机制

Token 是一个字符串，由服务端生成，用于保证请求的有效性，过滤掉非法的请求。一个 Token 可以由以下三部分组成：

- Token 字符串（token），可以是 UUID；
- 生成时的时间戳（timestamp）；
- 校验因子（sign），由 `token + timestamp `，通过一定的规则（比如 MD5）生成。

示例（`sg = md5(tk+"*"+tm+"*"+"k2@sz8-iA"`）：

```json
{
    "tk":"116b6451-6028-4490-8869-d32a84082b7c",
    "tm":"1536595200000",
    "sg":"91672a6af6d7d078676e2b26e8396ea1"
}
```

这样，当请求到达客户端时，我们先用先前的规则构造一个 md5 值，看与请求中的 sg 字段值是否相同，再判定 当前的时间戳与 tm 中的时间戳差值是否不超过预定义的过期时长。