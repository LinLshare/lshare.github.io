---
title: 20190519 编程反思
date: 2019-05-19 22:43:03
tags: [技术反思]
---

## Linux 命令

### CentOS yum 安装软件时，用 -y 可以避免安装软件时的确认提示

### mv -f 可以直接覆盖同名的文件

### sleep 可以加后缀，比如 sleep 1m 休眠 1 分钟

### 使用反引号进行命令替换，比如

```shell
pid=`ps aux | grep chrome | grep -v grep | awk '{print $2}'`
```

### tar 打包可以指定 -C 解决打包全路径的问题

```shell
# 不使用 -C，打包后的将保留全路径
tar -czvf adsl-abot.tar.gz ~/git/ms/abot-adsl
# 使用 -C，打包后只保留路径 abot-adsl
tar -czvf adsl-abot.tar.gz -C ~/git/ms abot-adsl
```

### ssh -a 可以 ssh 登录后自动执行设定命令

```shell
ssh server1 -a 'python run.py > /dev/null &'
```

### ssh 可通过 ssh key 免密码登录，以便 shell 编程访问服务器

```shell
# 生成 ssh key，注意不要设定 passphrase，直接回车即可
ssh-keygen -t rsa -b 4096 -C "user@example.com"
# 拷贝公钥到服务器
ssh-copy-id  -i ~/.ssh/id_rsa  -p <port> <name>@<host>
# 配置 ~/.ssh/config
Host server1
User <name>
HostName <host>
Port <port>
IdentityFile ./id_rsa
# shell 访问
ssh server1
```

### curl -x 可以指定使用代理访问，-o 可以保存为文件

```shell
# 代理访问
curl -x 120.83.121.55:8881 https://readhub.cn/topics
# 下载文件
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
```

